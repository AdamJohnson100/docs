---
title: Installing and Running Wavefront Proxies
keywords: Ansible
tags: [proxies]
sidebar: doc_sidebar
permalink: proxies_installing.html
summary: Learn how to install and run Wavefront proxies.
---
In most cases before metrics can begin streaming to Wavefront from a host or application you must run a Wavefront proxy in your installation. This article describes various methods for installing and running Wavefront proxies: on a single host, on multiple Linux hosts, and in a Docker container.

Installation procedures require an Wavefront API URL `<wavefront_api_url>` in the format `https://<wavefront_instance>.wavefront.com/api/` and an API token. Some procedures configure these properties for you automatically. To manually generate an API token, see [Generating an API Token](wavefront_api.html#generating-an-api-token).

{% include shared/permissions_view.html entity="proxies" entitymgmt="Proxy" %}

## Proxy Host Requirements

- Internet access - run `timeout 3s curl -fIsS <wavefront_api_url>` from the host and make sure you get a response rather than timing out.
- Memory - the host does not need to be dedicated to running the Wavefront proxy; the proxy does not use a large amount of CPU, memory, or storage. However, we recommend running the proxy on a host with at least 4GB of free memory.
- Operating system
  - Linux
    - Ubuntu 12.04, 14.04, 16.04
    - CentOS 6.5, 7
    - RHEL 6, 7
    - Debian 7, 8, 9, 10
    - Amazon Linux
  - Mac - MacOS Sierra (10.12)

<a name="single"></a>

## Installing a Proxy on a Single Host

1. Open the Wavefront application UI.
1. Select **Browse > Proxies**.
1. Select **Add > New Proxy** at the top of the filter bar. The Add a Wavefront Proxy screen displays.
1. Click the **\[Linux \| MacOS \| Docker ]** tab.
1. Copy the script and run on your host.
1. After the proxy contacts the Wavefront server, the proxy name displays under "Checking for new proxies..." and the button label changes to Done.
1. Click **Done**. The Proxies page displays. Verify that your proxy is listed. If not, first follow the steps in [Checking Proxy Service Status](#checking-proxy-service-status) to make sure the proxy is running.

<a name="ansible"></a>

## Installing Proxies on Multiple Linux Hosts

Ansible is an open-source automation engine that automates software provisioning, configuration management, and application deployment. The Wavefront Ansible role installs and configures the Wavefront proxy, which allows you to automate Wavefront proxy installation on multiple hosts. For details, see the [Ansible in-product integration](integrations.html#in-product-integrations) instructions.

<a name="restart"></a>

## Managing Proxy Services

This section describes how to start and stop the proxy service, check service status, and view the logs generated by the service. 

If a proxy won't start or register with Wavefront and you need help, contact [Support]({{site.support_link}}).

### Starting and Stopping a Proxy

- Linux

  ```shell
  $ service wavefront-proxy [start | stop | restart]
  ```
- MacOS

  ```shell
  $ brew services [start | stop | restart] wfproxy
  ```

### Checking Proxy Service Status
 
To check if the proxy is running, run the following commands on the proxy host:

- Linux

  ```shell
  $ service wavefront-proxy status
  ```
  You can view the proxy log at `/var/log/wavefront/wavefront.log`. 
- MacOS

  ```shell
  $ brew services list
  ```
  
  You can view the proxy log at `/usr/local/var/log/wfproxy.log`.

<a name="docker"></a>

## Running a Proxy in a Docker Container

To run a Docker container using the Docker run command follow the instructions in [Installing a Proxy on a Single Host](#single). If you want to use Docker Compose or Kubernetes to run the proxy, use the configurations below, setting the `WAVEFRONT_URL` and `WAVEFRONT_TOKEN` properties in each script.

### Docker Compose

```yaml
wavefront:  
    hostname: wavefront-proxy  
    container_name: wavefront-proxy  
    ports:  
      - "3878:3878"  
      - "2878:2878"  
      - "4242:4242"  
    environment:  
      WAVEFRONT_URL: <wavefront_api_url>
      WAVEFRONT_TOKEN: <wavefront_api_token>
    image: wavefronthq/proxy:latest  
    restart: always
```

### Kubernetes

```yaml
apiVersion: v1  
kind: ReplicationController  
metadata:  
  labels:  
    app: wavefront-proxy  
    name: wavefront-proxy  
  name: wavefront-proxy  
  namespace: default  
spec:  
  replicas: 1  
  selector:  
    app: wavefront-proxy  
  template:  
    metadata:  
      labels:  
        app: wavefront-proxy  
    spec:  
      containers:  
      - name: wavefront-proxy  
        image: wavefronthq/proxy:latest  
        imagePullPolicy: Always  
        env:  
        - name: WAVEFRONT_URL  
          value: <wavefront_api_url>  
        - name: WAVEFRONT_TOKEN  
          value: <wavefront_api_token>
        ports:  
        - containerPort: 2878  
          protocol: TCP  
        - containerPort: 4242  
          protocol: TCP  
```