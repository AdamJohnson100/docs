<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="This topic describes how to use the Wavefront CLI.">
<meta name="keywords" content="proxies,  proxies">
<title>Wavefront CLI2 | Wavefront</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-91867056-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/wavefront_favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-lg navbar-brand" href="/wf-docs/index.html">
                <img src="/wf-docs/images/wavefront_logo_white.png"></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="index.html">Documentation</a></li>
                
                
                
                <li><a href="news">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:stephanie@wavefront.com?subject=Wavefront Documentation feedback&body=I have some feedback about the Wavefront CLI2 page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Wavefront CLI2">{title}</a></li>',
                                noResultsText: 'No results found.', limit: 10, fuzzy: true, })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          


<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Wavefront </li>
    
    
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">About Wavefront Documentation</a></li>
            
            
            
            
            
            
            <li><a href="introduction.html">Introduction to Wavefront</a></li>
            
            
            
            
            
            
            <li><a href="tags.html">Introduction to Tags</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Release Notes</a>
        <ul>
            
            
            
            <li><a href="50_release_notes.html">5.0 Release Notes</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Proxies</a>
        <ul>
            
            
            
            <li><a href="wavefront_cli.html">Wavefront CLI</a></li>
            
            
            
            
            
            
            <li><a href="proxy_configuration.html">Wavefront Proxy Configuration</a></li>
            
            
            
            
            
            
            <li><a href="proxy_preprocessor_rules.html">Configuring Wavefront Proxy Preprocessor Rules</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Query Language</a>
        <ul>
            
            
            
            <li><a href="time_series_language_reference.html">Time Series Query Language Reference</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Dashboards</a>
        <ul>
            
            
            
            <li><a href="intro_dashboards.html">Introductory Dashboards</a></li>
            
            
            
            
            
            
            <li><a href="managing_dashboards.html">Managing Dashboards</a></li>
            
            
            
            
            
            
            <li><a href="dashboard_variables.html">Dashboards Variables</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Events</a>
        <ul>
            
            
            
            <li><a href="events.html">Events</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Integrations</a>
        <ul>
            
            
            
            <li><a href="aws_metrics_integration.html">AWS Metrics Integration</a></li>
            
            
            
            
            
            
            <li><a href="external_links.html">External Links</a></li>
            
            
            
            
            
            
            <li><a href="sending_log_data.html">Sending Log Data Metrics To Wavefront</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Tags</a>
        <ul>
            
            
            
            <li><a href="tag_overview.html">Tag Overview</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">Tag Pages</a>
                <ul>
                    
                    
                    
                    <li><a href="tag_getting_started.html">Getting Started Pages</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_dashboards.html">Dashboards Pages</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_integrations.html">Integrations Pages</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_proxies.html">Proxies Pages</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_query_language.html">Query Language Pages</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Wavefront CLI2</h1>
</div>



<div class="post-content">

   
    <div class="summary">This topic describes how to use the Wavefront CLI.</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    
<!--
    <a target="_blank" href="https://github.com/WavefrontHQ/docs/gh-pagespages//wavefront_cli2.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
-->
    

  <h1 id="wavefront-cli">Wavefront CLI</h1>

<p>The Wavefront Command Line Interface (CLI) is a utility for automating the installation and configuration of the Wavefront Proxy,
Telegraf (metric collector agent), and integrations. The CLI uses native package managers to install packages (i.e. yum, apt-get) and therefore
should be run as sudo.</p>

<h2 id="installation">Installation</h2>

<p>The Wavefront CLI is available on PyPI as a pip package.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo pip install wavefront-cli
</code></pre>
</div>

<h2 id="requirements">Requirements</h2>

<p>The Wavefront CLI is currently supported on Linux environments only and has been tested on the following Linux versions:</p>

<ul>
  <li>Amazon Linux AMI 2016.09.0</li>
  <li>CentOS 6.7, 7.2</li>
  <li>Debian Jesse, Wheezy</li>
  <li>RedHat 6.6, 7.3</li>
  <li>Ubuntu 14.04, 16.04</li>
</ul>

<p>The oldest version of Python it has been tested with is 2.6.6. If you do not see your family of operating system listed above or receive an error, please contact support@wavefront.com.</p>

<p><em>*Note</em> - If you’re using Docker or a Docker optimized operating system such as CentOS Atomic, 
we highly recommend looking at Wavefront’s options for <a href="https://community.wavefront.com/docs/DOC-1186">Docker Monitoring</a>.</p>

<h2 id="running-remotely">Running Remotely</h2>

<p>You can run the Wavefront CLI directly via <code class="highlighter-rouge">curl</code>. This is useful when you want to install the Proxy and/or agent in a single command.
Any command line arguments added to the example below are passed to the Wavefront CLI.</p>

<p><code class="highlighter-rouge">
 $ sudo bash -c "$(curl -sL https://raw.githubusercontent.com/wavefronthq/wavefront-cli/master/sh/install.sh)" --
</code></p>

<h2 id="usage">Usage</h2>

<p>The Wavefront CLI has three top level commands: <code class="highlighter-rouge">install</code>, <code class="highlighter-rouge">integration</code>, and <code class="highlighter-rouge">configure</code>.
To see a full list of all options run <code class="highlighter-rouge">wave -h</code>.</p>

<h3 id="the-install-command">The Install Command</h3>

<p>The most common use for the Wavefront CLI is installing the Wavefront Proxy and/or Telegraf on a host.
The <code class="highlighter-rouge">install</code> command accepts multiple options. If a required option is not passed as an argument, the CLI prompts you for missing input.
If all required options are passed, the CLI does not prompt for input.</p>

<p>The <code class="highlighter-rouge">install</code> command accepts 1-4 top level options: <code class="highlighter-rouge">--proxy</code>, <code class="highlighter-rouge">--agent</code>, <code class="highlighter-rouge">--statsd</code>, <code class="highlighter-rouge">--aws</code>.</p>

<ul>
  <li><code class="highlighter-rouge">--proxy</code> - Install and configure the Wavefront Proxy on the current host.</li>
  <li><code class="highlighter-rouge">--agent</code> - Install and configure Telegraf on the current host.</li>
  <li><code class="highlighter-rouge">--aws</code> - *AWS only - Add AWS EC2 metadata to the Telegraf configuration as tags. This means metrics from the current host are tagged with the EC2 tags, AWS region, the VPC ID, and Image ID of the EC2 instance.</li>
  <li><code class="highlighter-rouge">--statsd</code> - Enable the Telegraf StatsD service plugin. *Note: This requires installing Telegraf via the <code class="highlighter-rouge">--agent</code> option.</li>
</ul>

<h4 id="install-example-usage">Install: Example Usage</h4>

<p>Each top-level option has 1 to several sub-options. If any required sub-option is not provided, the CLI prompts for input.
Below are examples of the install command.</p>

<p>Install Proxy and Telegraf (the CLI will prompt for required options):
<code class="highlighter-rouge">
$ sudo wave install --proxy --agent
</code></p>

<p>Install Proxy and Telegraf with no prompt:
<code class="highlighter-rouge">
$ sudo wave install \
    --proxy \
        --wavefront-url=https://YOUR_INSTANCE.wavefront.com \
        --api-token=YOUR_API_TOKEN \
    --agent \
        --proxy-address=localhost \
        --proxy-port=2878
</code></p>

<p>Install Proxy and Telegraf and configure AWS Metadata and StatsD in Telegraf with no prompt:
<code class="highlighter-rouge">
$ sudo wave install \
    --proxy \
        --wavefront-url=https://YOUR_INSTANCE.wavefront.com \
        --api-token=YOUR_API_TOKEN \
    --agent \
        --proxy-address=localhost \
        --proxy-port=2878 \
        --agent-tags="env=dev,app=myapp"
    --statsd \
        --statsd-port=8125 \
    --aws \
        --aws-region=us-west-2 \
        --aws-secret-key-id=YOUR_KEY_ID \
        --aws-secret-key=YOUR_SECRET_KEY
</code></p>

<h3 id="the-integration-command">The Integration Command</h3>

<p>The <code class="highlighter-rouge">integration</code> command installs or removes a Wavefront integration. In most cases, this means generating a Telegraf config file in <code class="highlighter-rouge">/etc/telegraf/telegraf.d</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo wave integration &lt;name&gt; (install|remove) [&lt;option&gt;...]
</code></pre>
</div>

<h4 id="integration-example-usage">Integration: Example Usage</h4>

<p>Install StatsD service plugin on port 8215 (default) in Telegraf:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo wave integration StatsD install statsd_port=8125
</code></pre>
</div>

<p>Install Wavefront output plugin in Telegraf to emit to a Proxy installed on localhost:2878:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo wave integration Wavefront install proxy_address=localhost proxy_port=2878
</code></pre>
</div>

<h4 id="contributing-integrations">Contributing Integrations</h4>

<p>The <code class="highlighter-rouge">&lt;name&gt;</code> argument of the <code class="highlighter-rouge">integration</code> command creates an instance of a <code class="highlighter-rouge">wavefront_cli.integrations.Base</code> subclass matching the <code class="highlighter-rouge">&lt;name&gt;</code> argument.
When installing an integration, any arguments passed in the <code class="highlighter-rouge">[&lt;option&gt;...]</code> part of the command are passed to the subclass as a dictionary. This makes it possible
to drop in new integrations.</p>

<p>At a minimum, an integration subclass must implement the following methods:
```
class Example(Base):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>def install(self):
    return True

def remove(self):
    return True

def validate_options(self):
    return True ```
</code></pre>
</div>

<p>See <code class="highlighter-rouge">wavefront_cli/integrations/statsd.py</code> for a very simple example of an integration implementation.</p>

<h2 id="release-process">Release Process</h2>

<p><code class="highlighter-rouge">release.sh</code> packages and ships this module to PyPI. If you wish to cut your own version and upload to your own PyPI project, edit <code class="highlighter-rouge">setup.py</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ ./release.sh
</code></pre>
</div>


    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tag_proxies.html" class="btn btn-default navbar-btn cursorNorm" role="button">proxies</a>
        
        
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Wavefront. All rights reserved. <br />
 Site last generated: Feb 15, 2017 <br />
<p></p>
<p><img src="images/wavefront_logo.png" alt="Wavefront logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-91867056-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>



</html>